<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with organisation lists • ror4r</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Working with organisation lists">
<meta property="og:description" content="ror4r">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ror4r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ror4r.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Get-ID-maps.html">Get ID maps</a>
    </li>
    <li>
      <a href="../articles/Working-with-organisation-lists.html">Working with organisation lists</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Working with organisation lists</h1>
            
      
      
      <div class="hidden name"><code>Working-with-organisation-lists.Rmd</code></div>

    </div>

    
    
<p>The most useful part of ROR is retrieving lists of organisations. For
now, the wrapper for doing this is the most powerful part of the
package. This article with a quick run through of how to use the
<code><a href="../reference/get_org_list.html">get_org_list()</a></code> function.</p>
<div class="section level2">
<h2 id="paramaters">Paramaters<a class="anchor" aria-label="anchor" href="#paramaters"></a>
</h2>
<div class="section level3">
<h3 id="search_terms">.search_terms<a class="anchor" aria-label="anchor" href="#search_terms"></a>
</h3>
<p><code>.search_terms</code> let’s you enter a search term (or multiple
terms, separate by “|”) by which to filter results. The API will check
this term (or these terms) against every possible field and return any
potential match on this basis. This is most likely useful if you need to
do a broad brush search and are worried being too specific might exclude
useful results.</p>
</div>
<div class="section level3">
<h3 id="affiliation">.affiliation<a class="anchor" aria-label="anchor" href="#affiliation"></a>
</h3>
<p><code>.affiliation</code> is much more precise than .search_terms. It
only looks at three fields (name, label (which often includes names in
non_English languages) and aliases). Then multiple search algorithms are
tried, with potential matches being scored 0-1 (quite how this scoring
is done isn’t revealed). Initially even ‘below threshold’ results are
returned, however <code><a href="../reference/get_org_list.html">get_org_list()</a></code> narrows this down to only
the chosen results. You should only use this if you really know which
organisation you’d like to return, but perhaps don’t know its id. For
example, searching for affiliation “Exeter” only returns Exeter Phillips
Academy - not any organisation in Exeter, UK! “University of Exeter”,
however, only returns the University of Exeter, UK.</p>
<p>If you use <code>.affiliation</code>, the only other parameter you
can define are desired page numbers, although it is unlikely you will
get more than one page of results.</p>
</div>
<div class="section level3">
<h3 id="org_type">.org_type<a class="anchor" aria-label="anchor" href="#org_type"></a>
</h3>
<p>ROR categorises the organisations it indexes into different
types:</p>
<ul>
<li>Archive</li>
<li>Company</li>
<li>Education</li>
<li>Facility</li>
<li>Government</li>
<li>Healthcare</li>
<li>Nonprofit</li>
<li>Other</li>
</ul>
<p>This can be useful to help narrow down results.</p>
</div>
<div class="section level3">
<h3 id="country_code-and--country_name">.country_code and .country_name<a class="anchor" aria-label="anchor" href="#country_code-and--country_name"></a>
</h3>
<p>The API lets you filter results by either <a href="#https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="external-link">country alpha-2
ISO code</a> or by name (as per the same list). You can only use one or
the other at a time.</p>
</div>
<div class="section level3">
<h3 id="page_numbers">.page_numbers<a class="anchor" aria-label="anchor" href="#page_numbers"></a>
</h3>
<p>The API returns 20 results per page, and defaults to sending the
first page of results. There is no option to adjust page size. This is
important to remember as with &gt;100,000 organisations registered,
returning them all would require more than 5,000 pages. This wrapper is
set to send only one request per second (to avoid throttling or taking
more than your fair share of bandwidth), so it would take at least 5,000
seconds (83 minutes) to return all results. Therefore it is critical you
try and limit your requests in some way using the parameters. If you
only want the first page, or first few pages (or last few, etc) you can
use this as a way to narrow down what is returned. Caution should be
urged though, as before running the request you may not know how many
pages there are, or which page the result(s) you want is/are on.</p>
</div>
</div>
<div class="section level2">
<h2 id="a-worked-example">A worked example<a class="anchor" aria-label="anchor" href="#a-worked-example"></a>
</h2>
<p>This is a quick example to iteratively narrow down your results -
although if you have enough information up front, no reason you can’t
enter all required parameters at once.</p>
<p>Say we initially want to find education organisations in the UK:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ror4r</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_org_list.html">get_org_list</a></span><span class="op">(</span>.org_type <span class="op">=</span> <span class="st">"Education"</span>, .country_code <span class="op">=</span> <span class="st">"GB"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span> <span class="co">#only six columns as there are a lot of wide columns</span></span>
<span><span class="co">#&gt;                          id                            name email_address</span></span>
<span><span class="co">#&gt; 1 https://ror.org/052411t69      Courtauld Institute of Art          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2 https://ror.org/01thz0w07  Wessex Institute of Technology          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3 https://ror.org/003b78q25                     Wye College          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4 https://ror.org/0530xmm89     Royal College of Physicians          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5 https://ror.org/023372f11 Royal Northern College of Music          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6 https://ror.org/05bh64v90            South Thames College          &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   ip_addresses established     types</span></span>
<span><span class="co">#&gt; 1         NULL        1932 Education</span></span>
<span><span class="co">#&gt; 2         NULL        1986 Education</span></span>
<span><span class="co">#&gt; 3         NULL        1447 Education</span></span>
<span><span class="co">#&gt; 4         NULL        1518 Education</span></span>
<span><span class="co">#&gt; 5         NULL        1973 Education</span></span>
<span><span class="co">#&gt; 6         NULL        1895 Education</span></span></code></pre></div>
<p>This worked but it took a while. There are 550 results, 28 pages, so
you’re looking at at least 28 seconds to return all the results in a
dataframe.</p>
<p>Maybe we know a bit more about the organisation. Although we might
need to filter the <code>data</code> dataframe based on this, there are
some options using the <code>.search_terms</code> parameter. Say we know
we’re looking for a university - that’s likely to be in the
<code>name</code> field, which is indexed and thus searchable.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">data_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_org_list.html">get_org_list</a></span><span class="op">(</span>.org_type <span class="op">=</span> <span class="st">"Education"</span>, .country_code <span class="op">=</span> <span class="st">"GB"</span>, .search_terms <span class="op">=</span> <span class="st">"university"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_2</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span>
<span><span class="co">#&gt;                          id                     name email_address ip_addresses</span></span>
<span><span class="co">#&gt; 1 https://ror.org/04vg4w365  Loughborough University          &lt;NA&gt;         NULL</span></span>
<span><span class="co">#&gt; 2 https://ror.org/03angcq70 University of Birmingham                       NULL</span></span>
<span><span class="co">#&gt; 3 https://ror.org/05j0ve876         Aston University          &lt;NA&gt;         NULL</span></span>
<span><span class="co">#&gt; 4 https://ror.org/01a77tt86    University of Warwick          &lt;NA&gt;         NULL</span></span>
<span><span class="co">#&gt; 5 https://ror.org/01v29qb04        Durham University          &lt;NA&gt;         NULL</span></span>
<span><span class="co">#&gt; 6 https://ror.org/05cncd958     Cranfield University                       NULL</span></span>
<span><span class="co">#&gt;   established     types</span></span>
<span><span class="co">#&gt; 1        1909 Education</span></span>
<span><span class="co">#&gt; 2        1900 Education</span></span>
<span><span class="co">#&gt; 3        1895 Education</span></span>
<span><span class="co">#&gt; 4        1965 Education</span></span>
<span><span class="co">#&gt; 5        1832 Education</span></span>
<span><span class="co">#&gt; 6        1993 Education</span></span></code></pre></div>
<p>We’ve now narrowed down to 159 results/8 pages, which is roughly
three times quicker to run.</p>
<p>At this point it’s difficult to do much more to reduce the list. You
could make it more expansive using “|” to add an OR clause to search
terms if results are too narrow. You can also interact with the
resulting dataframe to make it smaller - hopefully it’s now small enough
to explore.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Shane Jackson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
